{% extends "base.html" %}
{% block content %}
<h2>Chi tiết đăng ký</h2>
<div class="card mb-3">
  <div class="card-body">
    <p><strong>Sinh viên:</strong> {{ enrollment.student.student_code }}</p>
    <p><strong>Môn học:</strong> {{ enrollment.course.code }} - {{ enrollment.course.name }}</p>
    <p><strong>Học kỳ:</strong> {{ enrollment.semester }}</p>
    <p><strong>Ngày tạo:</strong> {{ enrollment.created_at }}</p>
    {% if enrollment.grade %}
      <p><strong>Điểm:</strong> {{ enrollment.grade.score }}</p>
    {% else %}
      <p><strong>Điểm:</strong> Chưa nhập</p>
    {% endif %}
  </div>
</div>
<div class="d-flex gap-2">
  <a class="btn btn-secondary" href="{% url 'enrollments:list' %}">Quay lại</a>
  {% if user.role == "ADMIN" or user.role == "TEACHER" %}
    <a class="btn btn-primary" href="{% url 'enrollments:grade_update' enrollment.pk %}">Nhập điểm</a>
  {% endif %}
  {% if user.role == "ADMIN" or enrollment.student.user_id == user.id %}
    <form method="post" action="{% url 'enrollments:delete' enrollment.pk %}">
      {% csrf_token %}
      <button type="submit" class="btn btn-danger" onclick="return confirm('Xóa đăng ký này?')">Xóa</button>
    </form>
  {% endif %}
</div>
{% endblock %}
